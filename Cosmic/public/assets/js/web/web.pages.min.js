function WebHotelManagerInterface(){this.hotel_container=null,this.current_page_url=null,this.init=function(){this.current_page_url=window.location.pathname.substr(1)+window.location.search,this.hotel_container=$("#hotel-container"),this.hotel_container.find(".client-buttons .client-close").click(this.close_hotel),this.hotel_container.find(".client-buttons .client-fullscreen").click(this.toggle_fullscreen.bind(this)),this.hotel_container.find(".client-buttons .client-count").click(this.refresh_count),this.hotel_container.find(".client-buttons .client-radio").click(this.radio(this)),setInterval(function(){$("body").find(".client-buttons .client-count #count").load("/api/online")},12e4)},this.close_hotel=function(){Web.pages_manager.load(Web.pages_manager.last_page_url,null,!0,null,!0)},this.refresh_count=function(){$("body").find(".client-buttons .client-count #count").load("/api/online")},this.open_hotel=function(arguments){var e=this.hotel_container;this.hotel_actions;void 0!==arguments&&parse_str(arguments,{});var t=$("body");t.find(".header-container .header-content .account-container .account-buttons .hotel-button").text(Locale.web_hotel_backto),t.hasClass("hotel-visible")||Web.ajax_manager.get("/api/vote",function(a){if(void 0!==a.krews_list&&0==a.krews_list.status)e.prepend('<iframe class="client-frame" src="'+a.krews_api+'"></iframe>'),t.addClass("hotel-visible"),t.find(".client-buttons").hide(),History.pushState(null,Site.name+"- Krews Vote","hotel");else{0===e.find(".client-frame").length&&e.prepend('<iframe class="client-frame" src="/client"></iframe>'),t.addClass("hotel-visible");var i=document.getElementById("stream");i.src=Client.client_radio,i.volume=.1,i.play(),$(".fa-play").hide(),$(".fa-pause").show()}})},this.radio=function(){var e=document.getElementById("stream");this.hotel_container.find(".client-buttons .client-radio .fa-play").click(function(){e.src=Client.client_radio,e.volume=.1,e.play(),$(".fa-play").hide(),$(".fa-pause").show()}),this.hotel_container.find(".client-buttons .client-radio .fa-pause").click(function(){e.pause(),e.src="",e.load(),$(".fa-play").show(),$(".fa-pause").hide()}),this.hotel_container.find(".client-buttons .client-radio .fa-volume-up").click(function(){var t=e.volume;e.volume+=t>1?0:.1}),this.hotel_container.find(".client-buttons .client-radio .fa-volume-down").click(function(){var t=e.volume;e.volume-=t<0?0:.1})},this.toggle_fullscreen=function(){document.fullScreenElement&&document.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen?(document.documentElement.requestFullScreen?document.documentElement.requestFullScreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullScreen&&document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT),this.hotel_container.find(".client-buttons .client-fullscreen .client-fullscreen-icon").addClass("hidden"),this.hotel_container.find(".client-buttons .client-fullscreen .client-fullscreen-icon-back").removeClass("hidden")):(document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),this.hotel_container.find(".client-buttons .client-fullscreen .client-fullscreen-icon").removeClass("hidden"),this.hotel_container.find(".client-buttons .client-fullscreen .client-fullscreen-icon-back").addClass("hidden"))}}function WebPageArticleInterface(e){function t(e,t,a,i){return'<a href="'+t+'">'+a+"</a>"}this.main_page=e,this.init=function(){var e=this,a=this.main_page.get_page_container();this.reaction_tmp=['<div class="ac-item" style="border-radius: 10px;">\n   <div style="float: left; vertical-align: middle; ">\n         <img style="margin-top: -30px; margin-bottom: -60px;" src="'+Site.figure_url+'/avatarimage?figure={{figure}}}&direction=2&head_direction=3&gesture=sml&size=b&headonly=1" alt="">\n    </div>\n   <strong> <a href="/profile/'+User.username+'">'+User.username+"</a></strong>: {{message}} \n</div>"].join(""),a.find(".fa-times, .fa-eye").click(function(){if(1==User.is_logged&&1==User.is_staff){var e=$(this).attr("data-id");Web.ajax_manager.post("/community/articles/hide",{post:e},function(t){"success"===t.status&&("hide"===t.is_hidden?($(".fa-times[data-id="+e+"]").attr("class","fa fa-eye"),$(".ac-item[data-id="+e+"]").css("filter","grayscale(100%)")):($(".fa-eye[data-id="+e+"]").attr("class","fa fa-times"),$(".ac-item[data-id="+e+"]").css("filter","")))})}}),a.find(".article-reply").click(function(){if(1==User.is_logged){var i=$(this).attr("data-id"),n=$("#reply-message").val();Web.ajax_manager.post("/community/articles/add",{articleid:i,message:n},function(i){if("success"===i.status){var n=function(e){for(var a=[/\[url=(.*?)\](.*?)\[\/url\]/gi],i=[t],n=0;n<a.length;n++)e=e.replace(a[n],i[n]);return e}(i.bericht),s=$(e.reaction_tmp.replace(/{{figure}}/g,i.figure).replace(/{{message}}/g,n));a.find(".nano-pane").append(s),a.find(".reaction-reply").remove(),a.find(".nopost").remove()}})}else Web.notifications_manager.create("info",Locale.web_page_article_login)})}}function WebPageSettingsNamechangeInterface(e){this.main_page=e,this.init=function(){var e=this.main_page.get_page_container();e.find("#username").keyup(function(){var t=e.find("#username"),a=e.find("#changeButton"),i=t.val();i.length>0?Web.ajax_manager.post("/settings/namechange/availability",{username:i},function(e){i!==User.username&&"unavailable"!==e.status?a.removeAttr("disabled","disabled").html(Locale.web_page_settings_namechange_request):a.attr("disabled","disabled").html(Locale.web_page_settings_namechange_not_available)}):a.attr("disabled","disabled").html(Locale.web_page_settings_namechange_choose_name)})}}function WebPageSettingsInterface(e){this.main_page=e,this.init=function(){var e=this;this.main_page.get_page_container().find(".settings").change(function(){var t=$(this).attr("data-id"),a=this.checked;-1!==jQuery.inArray(t,["hide_inroom","hide_staff","hide_online","hide_last_online","hide_home"])&&(a=!a);var i={post:t,type:a};e.send_data(i)})},this.send_data=function(e){Web.ajax_manager.post("/settings/preferences/validate",e)}}function WebPageSettingsVerificationInterface(e){this.main_page=e,this.init=function(){var e=this,t=this.main_page.get_page_container();t.find(".type-select").selectric({theme:"web",onChange:function(t){e.switch_type(t.value)}}),t.find(".questions-select").selectric({theme:"web"}),t.find("#enable-verification-target").change(function(){e.switch_enable($(this).is(":checked"))}),t.find("form").submit(function(a){a.preventDefault();var i=t.find("#verification_enabled").val(),n=t.find("input[name = 'enable_verification']").is(":checked"),s={enabled:!1,type:null,data:null,current_password:t.find("input[name = 'current_password']").val()};if(isEmpty(s.current_password))Web.notifications_manager.create("error",Locale.web_page_settings_verification_fill_password,Locale.web_page_settings_verification_oops);else if(n){var o=t.find("select[name = 'twosteps_login_type']").val();if("app"===o){function c(){Web.dialog_manager.create("confirm",Locale.web_page_settings_verification_2fa_secretkey,Locale.web_page_settings_verification_2fa_authcode,null,"pincode",function(a){s.type="app",s.data=t.find("#twosteps_login_data_code").val(),s.enabled=n,s.input=a.toString(),e.send_data(s)})}"pincode"===i?Web.dialog_manager.create("default",Locale.web_page_settings_verification_2fa_on,Locale.web_page_settings_verification_oops,null,null,function(){c()}):isEmpty(i)&&c()}else if("pincode"===o){function r(){var a=t.find("input[name = 'twosteps_login_pincode']").val();s.type="pincode",s.data=a,s.enabled=n,e.send_data(s)}"app"===i?Web.dialog_manager.create("default",Locale.web_page_settings_verification_2fa_on,Locale.web_page_settings_verification_oops,null,null,function(){r()}):"pincode"===i?Web.dialog_manager.create("default",Locale.web_page_settings_verification_pincode_on,Locale.web_page_settings_verification_oops,null,null,function(){r()}):r()}else s.enabled=!1,e.send_data(s)}else"app"==i?Web.dialog_manager.create("confirm",Locale.web_page_settings_verification_2fa_off,Locale.web_page_settings_verification_2fa_authcode,null,"pincode",function(a){s.type="app",s.enabled=!1,s.data=t.find("#twosteps_login_data_code").val(),s.input=a.toString(),e.send_data(s)}):"pincode"==i?Web.dialog_manager.create("confirm",Locale.web_page_settings_verification_pincode_off,Locale.web_page_settings_verification_pincode,null,"pincode",function(t){s.type="pincode",s.enabled=!1,s.input=t.toString(),e.send_data(s)}):Web.notifications_manager.create("error",Locale.web_page_settings_verification_switch,Locale.web_page_settings_verification_oops)})},this.send_data=function(e){Web.ajax_manager.post("/settings/verification/validate",e)},this.switch_enable=function(e){e?this.main_page.get_page_container().find(".verification-container").show():this.main_page.get_page_container().find(".verification-container").hide()},this.switch_type=function(e){this.main_page.get_page_container().find(".verification-selected[data-method != '"+e+"']:visible").hide(),this.main_page.get_page_container().find(".verification-selected[data-method = '"+e+"']").show()}}function WebPageHelpRequestsInterface(e){this.main_page=e,this.init=function(){this.main_page.get_page_container().find(".selectric").selectric({theme:"web"})}}function WebPageProfileInterface(e){function t(e,t,a,i){return'<a href="'+t+'">'+a+"</a>"}function a(e){for(var a=[/\[url=(.*?)\](.*?)\[\/url\]/gi],i=[t],n=0;n<a.length;n++)e=e.replace(a[n],i[n]);return e}function i(e){1==User.is_logged?Web.ajax_manager.post("/community/feeds/like",{post:e},function(t){"success"==t.status&&($(".fa-heart[data-id="+e+"]").addClass("pulsateOnce"),$(".likes-count[data-id="+e+"]").text(parseInt($(".likes-count[data-id="+e+"]").text())+1))}):Web.notifications_manager.create("error",Locale.web_page_profile_login,Locale.web_page_profile_loggedout)}this.main_page=e,this.article_template=['<div class="feed-item" data-id="{feed.id}" id="{feed.id}">\n   <div class="fi-avatar logo" style="margin-right: 0; height: 60px; margin-top: -7px;">\n       <div style="background: url('+Site.figure_url+'/avatar/imaging/avatarimage?figure={{figure}}&direction=3&headonly=1) no-repeat center; width: 48px; height: 62px;"></div>\n   </div>\n   <div class="fi-content">\n   <div class="fc-user">\n   <strong><div class="user-style"><span class="user-style black"><span class="user-icon cog"></span>{{feed.from_username}}</span></div></strong>\n     - <span data-toggle="tooltip" data-placement="right" title="" data-original-title="{{feed.timestamp|time_diff}}"><small>{{feed.timestamp}}</small></span>\n   </div>\n   <div class="fc-content">{feed.message}</div>\n   <div class="fc-tools" data-id="{feed.id}">\n       <a href="#" class="likes-count fc-like" data-id="{feed.id}">{{feed.likes}}</a> <a href="#" class="fc-like" data-id="{feed.id}" style="margin-right:10px;"><i class="fa fa-heart"  data-id="{feed.id}" style="color: #D67979;"></i></a>\n      <a href="#"><i class="fa fa-flag" data-id="{feed.id}" data-report="feed" style="color: #7B7777;"></i></a>&nbsp;\n   </div></div>'].join(""),this.current_page=1,this.init=function(){var e=this,t=this.main_page.get_page_container();t.find(".default-section[data-section = 'photos'] .items-container").magnificPopup({delegate:"a",type:"image",closeOnContentClick:!1,closeBtnInside:!1,mainClass:"mfp-with-zoom mfp-img-mobile report",image:{verticalFit:!0,titleSrc:function(e){return User.id==e.el.attr("data-player")?'<i class="fa fa-times-circle" data-id="'+e.el.attr("data-id")+'" style="color: #fff;"></i> <i class="fa fa-flag" data-report="photo" data-value="photos" data-id="'+e.el.attr("data-id")+'" style="color: #fff;"></i> '+e.el.attr("data-title"):1==User.is_logged?'<i class="fa fa-flag" data-report="photo" data-value="photos" data-id="'+e.el.attr("data-id")+'" style="color: #fff;"></i> '+e.el.attr("data-title"):e.el.attr("data-title")}},gallery:{enabled:!0},zoom:{enabled:!0,duration:300,opener:function(e){return e.find("div")}}}),t.find(".fa-heart").click(function(){i($(this).attr("data-id"))}),t.find(".fa-remove").click(function(){var e=$(this).attr("data-id");Web.ajax_manager.post("/community/feeds/delete",{feedid:e})}),t.find(".load-more-button button").click(function(){var n=$(this).attr("data-id"),s=$(".feed-item").length;Web.ajax_manager.post("/community/feeds/more",{current_page:e.current_page,player_id:n,count:s},function(n){if(n.feeds.length>0){for(var s=0;s<n.feeds.length;s++){var o=n.feeds[s],c=a(o.message),r=$(e.article_template.replace(/{{feed.from_username}}/g,o.from_username).replace(/{{feed.timestamp}}/g,o.timestamp).replace(/{feed.id}/g,o.id).replace(/{{feed.to_username}}/g,o.to_username).replace(/{feed.message}/g,c).replace(/{{feed.likes}}/g,o.likes).replace(/{{feed.countreactions}}/g,o.countreactions).replace(/{{figure}}/g,o.figure).replace(/{{feed.profile}}/g,o.profile));t.find(".feeds").append(r),t.find(".fc-like[data-id="+o.id+"]").click(function(){i($(this).attr("data-id"))})}e.current_page=n.current_page}})})},$($(".rounded-input")).on("keypress",function(e){var t,a;13==(e.keyCode||e.which)&&(t=$(".rounded-input").val(),a=$("input[name=userid]").val(),Web.ajax_manager.post("/community/feeds/post",{reply:t,userid:a}))})}function WebPageCommunityPhotosInterface(e){this.main_page=e,this.photo_template=['<div class="photo-container" style="display: none;">\n    <div class="photo-content">\n        <a href="{story}" class="photo-picture" target="_blank" style="background-image: url({story});" data-title="{photo.date.min} door {creator.username}"></a>\n        <a href="#" class="photo-meta flex-container flex-vertical-center">\n            <div class="photo-meta-left-side"><img src="/imaging/avatarimage?figure={creator.figure}&gesture=sml&headonly=1" alt="{creator.username}" class="pixelated"></div>\n            <div class="photo-meta-right-side">\n                <div class="creator-name">{creator.username}</div>\n                <div class="published-date">{photo.date.full}</div>\n                <span class="likes-count fc-like" data-id="{photo._id}">{photo.likes}</span> <i class="fa fa-heart" data-id="{photo._id}" style="color: #D67979;"></i>  <i class="fa fa-flag" data-id="{photo._id}" data-report="photo" style="color: #7B7777;"></i>            </div>\n        </a>\n    </div>\n</div>'].join(""),this.current_page=1,this.init=function(){var e=this,t=this.main_page.get_page_container();function a(e){1==User.is_logged?Web.ajax_manager.post("/community/photos/like",{post:e},function(t){"success"==t.status&&($(".fa-heart[data-id="+e+"]").addClass("pulsateOnce"),$(".likes-count[data-id="+e+"]").text(parseInt($(".likes-count[data-id="+e+"]").text())+1))}):Web.notifications_manager.create("error",Locale.web_page_community_photos_login,Locale.web_page_community_photos_loggedout)}t.find(".photos-container").magnificPopup({delegate:"a.photo-picture",type:"image",closeOnContentClick:!1,closeBtnInside:!1,mainClass:"mfp-with-zoom mfp-img-mobile",image:{verticalFit:!0,titleSrc:function(e){return 1==User.is_logged?'<i class="fa fa-flag" data-value="photos" data-id="'+e.el.attr("data-id")+'" data-report="photo" style="color: #fff;"></i> '+e.el.attr("data-title"):e.el.attr("data-title")}},gallery:{enabled:!0},zoom:{enabled:!0,duration:300,opener:function(e){return e}}}),t.find(".fa-heart").click(function(){a($(this).attr("data-id"))}),t.find(".load-more-button button").click(function(){var i=$(".photo-container").length;Web.ajax_manager.post("/community/photos/more",{current_page:e.current_page,offset:i},function(i){if(i.photos.length>0){for(var n=0;n<i.photos.length;n++){var s=i.photos[n],o=$(e.photo_template.replace(/{story}/g,s.url).replace(/{photo._id}/g,s.id).replace(/{photo.likes}/g,s.likes).replace(/{photo.date.full}/g,s.timestamp).replace(/{photo.date.min}/g,s.timestamp).replace(/{creator.username}/g,s.author).replace(/{creator.figure}/g,s.look));t.find(".photos-container").append(o),o.fadeIn(),t.find(".fa-heart[data-id="+s.id+"]").click(function(){a($(this).attr("data-id"))})}e.current_page=i.current_page}})})}}function WebPageCommunityValueInterface(e){this.main_page=e,this.init=function(){var e=this;this.main_page.get_page_container();if(User.is_logged){var t=$(".page-content");t.find(".payment-button").click(function(){var t=$(this).closest(".payment-button").attr("data-id"),a=$(this).closest(".payment-button").attr("data-image"),i=$(this).closest(".payment-button").attr("data-costs"),n=$(this).closest(".payment-button").attr("data-type"),s=$(this).closest(".payment-button").attr("data-state");e.open_solution_payment(t,a,i,n,s)}),t.find(".sell-item").click(function(){var t=$(this).closest(".sell-item").attr("data-id"),a=$(this).closest(".sell-item").attr("data-image");e.open_sell_item(t,a)}),t.find("[name=search-furni]").on("input",function(){e.search_furni(this.value)})}},this.search_furni=function(e){var t=this,a=$(".default-table");Web.ajax_manager.post("/shop/marketplace/search",{furni_name:e},function(e){if(e.length>0){a.find(".marketplace").empty();for(var i=0;i<e.length;i++){var n=e[i],s=['<tr><td><img src="'+Site.game_url+"/meubels/"+n.catalog_name+'_icon.png" class="pixelated"></td><td><a href="#" style="border-bottom: 1px dotted;" class="payment-button buy-button" data-id="'+n.id+'" data-image="'+n.catalog_name+'" data-costs="'+n.item_costs+'" data-type="'+n.currency+'">'+n.catalog_name+'</a></td><td style="font-size: 14px">'+n.user.username+"</td><td>"+n.currency+'</td><td style="font-size: 14px; font-weight: bold">'+n.item_costs+"</td></tr>"];a.find(".marketplace").append(s)}$(".page-content").find(".buy-button").click(function(){var e=$(this).closest(".buy-button").attr("data-id"),a=$(this).closest(".buy-button").attr("data-image"),i=$(this).closest(".buy-button").attr("data-costs"),n=$(this).closest(".buy-button").attr("data-type");t.open_solution_payment(e,a,i,n,"marketplace")})}})},this.open_sell_item=function(e,t){var a=['<div class="payment-popup sell-item-popup zoom-anim-dialog">\n    <div class="main-step">        <h3 class="title">Sell '+t+'</h3>        <img src="'+Site.game_url+"/meubels/"+t+'_icon.png" style="display: block;margin: auto;margin-top: 33px;width:15%">        <div class="solution-details"></div>        <div class="obtain-code"></div>        <div class="row">            <select name="currencys" class="selectric" style="margin-top:25px"></select>            <input type="text" style="margin-top: 15px" class="rounded-input blue-active costs" placeholder="Costs...">            <button class="rounded-button blue plain submit" style="margin-top:15px">'+Locale.web_page_shop_offers_submit+"</button>        </div>    </div></div>"].join(""),i=$(a);Web.ajax_manager.get("/api/currencys",function(t){for(var a in t){var n=t[a];i.find(".selectric").append(new Option(n.currency,n.type))}i.find(".selectric").selectric({theme:"web"});var s=$(i);$.magnificPopup.open({closeOnBgClick:!1,items:{src:s,type:"inline"}}),s.find(".submit").click(function(){var t=s.find("[name=currencys]").val(),a=s.find(".costs").val();Web.ajax_manager.post("/shop/marketplace/sell",{item_id:e,currency:t,costs:a},function(e){"success"==e.status&&$.magnificPopup.close()})})})},this.open_solution_payment=function(e,t,a,i,n){var s=this,o=['<div class="payment-popup zoom-anim-dialog">\n    <div class="main-step">        <h3 class="title">'+t+'</h3>        <h5 class="subtitle">'+a+" "+i+'</h5>        <img src="'+Site.game_url+"/meubels/"+t+'_icon.png" style="display: block;margin: auto;margin-top: 33px;width:15%">        <div class="solution-details"></div>        <div class="obtain-code"></div>        <div class="row">            <div class="column" style="margin-top:25px">                <button class="rounded-button blue plain submit">Buy</button>            </div>        </div>    </div>    <div class="success-step">        <h3 class="title">'+Locale.web_page_shop_offers_success+"</h3>        "+Locale.web_page_shop_offers_received+" <span></span> "+Locale.web_page_shop_offers_received2+'        <img src="/assets/images/web/pages/shop/credits-success.png" alt="'+Locale.web_page_shop_offers_success+'">        <button class="rounded-button lightgreen plain">'+Locale.web_page_shop_offers_close+'</button>    </div>    <div class="error-step">        <h3 class="title">'+Locale.web_page_shop_offers_failed+"</h3>        "+Locale.web_page_shop_offers_failed_desc+'        <img src="/assets/images/web/pages/shop/credits-error.png" alt="'+Locale.web_page_shop_offers_failed+'">        <button class="rounded-button red plain">'+Locale.web_page_shop_offers_back+"</button>    </div></div>"].join(""),c=$(o),r=this.main_page.manager.current_page_url;$.magnificPopup.open({closeOnBgClick:!1,items:{src:c,type:"inline"}}),c.find(".submit").click(function(){s.submit_code(e,n,r)})},this.submit_code=function(e,t,a=!1){Web.ajax_manager.post("/shop/marketplace/catalogue",{item_id:e,state:t,page_url:a}),$.magnificPopup.close()}}function WebPageHomeInterface(e){this.main_page=e,this.article_template=['<div class="article-container" style="display: none;">\n    <a href="/article/{article.id}-{article.slug}" class="article-content" style="background-image: url({article.banner});">\n        <div class="article-header">\n            <div class="article-category">{article.category}</div>\n            <div class="article-separation" style="background-color: {article.color};"></div>\n            <div class="article-title title" data-id="{article.id}">{article.title}</div>\n            <div class="article-title title-sub" data-id="{article.id}" style="display: none;">{article.title}</div>\n        </div>\n    </a>\n</div>'].join(""),this.current_page=1,this.init=function(){var e=this,t=this.main_page.get_page_container();t.find(".load-more-button button").click(function(){var a=$(".article-container").length;Web.ajax_manager.post("/community/articles/more",{current_page:e.current_page,offset:a},function(a){if(a.articles.length>0){for(var i=0;i<a.articles.length;i++){var n=a.articles[i],s=$(e.article_template.replace(/{article.slug}/g,n.slug).replace(/{article.banner}/g,n.header).replace(/{article.id}/g,n.id).replace(/{article.category}/g,n.category).replace(/{article.color}/g,n.color).replace(/{article.title}/g,n.title));t.find(".articles-container").append(s),s.fadeIn()}e.current_page=a.current_page}})}),$(".article-container").mouseenter(function(){var e=$(this).attr("data-id");$(".title[data-id="+e+"]").hide(),$(".title-sub[data-id="+e+"]").show()}),$(".article-container").mouseleave(function(){var e=$(this).attr("data-id");$(".title[data-id="+e+"]").show(),$(".title-sub[data-id="+e+"]").hide()}).mouseleave()}}function WebPageRegistrationInterface(e){this.main_page=e,this.gender="male",this.clouds_interval=null,this.clouds_frame=0,this.init=function(){var e=this,t=this.main_page.get_page_container();if(t.find("select:not([name = 'gender']).selectric").selectric({theme:"web"}),t.find("select[name = 'gender'].selectric").selectric({theme:"web",labelBuilder:"{text}",onChange:function(){e.gender=$(this).val(),e.update_avatar(1)}}),t.find(".username").keyup(function(){e.username_availability($(this).val())}),t.find(".tabs-container span").click(function(){$(this).hasClass("selected")||e.update_avatar($(this).attr("data-avatar"))}),Configuration.recaptcha_public)var a=grecaptcha.render("registration-recaptcha",{sitekey:Configuration.recaptcha_public,size:"invisible",badge:"bottomright",callback:function(e){t.find(".registration-form").removeClass("default-prevent").submit().addClass("default-prevent"),grecaptcha.reset(a)}});t.find(".registration-form").submit(function(e){$(this).hasClass("default-prevent")&&(e.preventDefault(),grecaptcha.execute(a))})},this.username_availability=function(e){var t=this.main_page.get_page_container();e.length>2?Web.ajax_manager.post("/settings/namechange/availability",{username:e},function(e){"available"!==e.status?t.find(".username").css("border","1px solid red"):t.find(".username").css("border","1px solid green")}):t.find(".username").css("border","1px solid red")},this.update_avatar=function(e){var t=this.main_page.get_page_container(),a=t.find(".avatars-preload").find("."+this.gender+"-avatar"+e).attr("src"),i=a.replace(Site.figure_url+"/imaging/avatarimage?figure=","").replace("&direction=4&size=l","");t.find(".avatars-container input[name = 'figure']").val(i),t.find(".avatars-container .avatar-container img").attr("src",a),t.find(".tabs-container span.selected").removeClass("selected"),t.find(".tabs-container span[data-avatar = '"+e+"']").addClass("selected"),this.update_clouds()},this.update_clouds=function(){var e=this,t=this.main_page.get_page_container();clearTimeout(this.clouds_interval),this.clouds_frame=0,this.clouds_interval=setInterval(function(){e.clouds_frame++,t.find(".avatars-container .avatar-container").attr("data-random",e.clouds_frame),8===e.clouds_frame&&(clearTimeout(e.clouds_interval),e.clouds_frame=0,t.find(".avatars-container .avatar-container").removeAttr("data-random"))},100)},this.check_captcha=function(){var e=this,t=this.main_page.get_page_container();t.find(".registration-recaptcha").length>0?t.find(".registration-form").submit():setTimeout(function(){e.check_captcha()},100)}}function WebPageJobsInterface(e){this.main_page=e,this.init=function(){var e=this.main_page.get_page_container();e.find(".experiences-container .add-experience").click(function(){var e=$(this).closest(".experiences-container").find(".experience-container:first-child").clone();e.find("[name]").val(""),e.insertBefore($(this))}),e.find(".no-experience").change(function(){var t=e.find(".experiences-container[data-experience-field = '"+$(this).attr("data-experience-field")+"']");if(0===t.length)return null;$(this).is(":checked")?t.hide():t.show()}),e.on("click",".experiences-container .experience-container .remove button",function(){if(1===$(this).closest(".experiences-container").find(".experience-container").length)return null;$(this).closest(".experience-container").remove()})}}function WebPageShopInterface(e){this.main_page=e,this.init=function(){var e=this.main_page.get_page_container();e.find(".filter-content .selectric").selectric({theme:"web"}),e.find(".selectric").change(function(){Web.pages_manager.load("shop/"+e.find(".filter-content .selectric").val()+"/lang")})}}function WebPageShopOffersInterface(e){this.main_page=e,this.offer_id=null,this.amount=0,this.country="nl",this.payments={Neosurf:{name:Locale.web_page_shop_offers_neosurf_name,description:Locale.web_page_shop_offers_neosurf_description,class:"neosurf",dialog:Locale.web_page_shop_offers_neosurf_dialog},Paypal:{name:Locale.web_page_shop_offers_paypal_name,description:Locale.web_page_shop_offers_paypal_description,class:"paypal",dialog:Locale.web_page_shop_offers_paypal_dialog},SMS:{name:Locale.web_page_shop_offers_sms_name,description:Locale.web_page_shop_offers_sms_description,class:"sms-plus",dialog:Locale.web_page_shop_offers_sms_dialog},Audiotel:{name:Locale.web_page_shop_offers_audiotel_name,description:Locale.web_page_shop_offers_audiotel_description,class:"audiotel",dialog:Locale.web_page_shop_offers_audiotel_dialog}},this.payment_template=['<article class="default-section offer-payment flex-container flex-vertical-center">\n    <div class="payment-image"></div>\n    <div class="payment-description"></div>\n    <div class="payment-button">\n        <button type="button" class="rounded-button blue">Kies</button>\n    </div>\n</article>'].join(""),this.init=function(){var e=this,t=this.main_page.get_page_container();User.is_logged&&(this.offer_id=t.find("#offer-id").val(),this.amount=t.find("#offer-amount").val(),this.country=t.find("#offer-country").val(),$.ajax({type:"get",url:"https://api.dedipass.com/v1/pay/rates?key="+this.offer_id,dataType:"json"}).done(function(a){t.find(".loading-solutions").length>0&&t.find(".loading-solutions").remove();for(var i=a.sort(function(e,t){var a=e.ordersolution,i=t.ordersolution;return a<i?-1:a>i?1:0}),n=0;n<i.length;n++){var s=i[n];if(e.payments.hasOwnProperty(s.solution)&&("all"===s.country.iso||s.country.iso===e.country)){var o=$(e.payment_template);o.attr("data-id",n),o.addClass(e.payments[s.solution].class),o.find(".payment-description").html("<h4>"+e.payments[s.solution].name+"</h4>"+e.payments[s.solution].description),t.find(".shop-offer").append(o),o.find(".payment-button button").click(function(){var t=i[$(this).closest(".offer-payment").attr("data-id")];e.open_solution_payment(t)})}}}))},this.open_solution_payment=function(e){var t=this,a=this.payments[e.solution],i=['<div class="payment-popup zoom-anim-dialog">\n    <div class="main-step">        <h3 class="title">'+Locale.web_page_shop_offers_pay_with+" "+a.name+'</h3>        <h5 class="subtitle">'+this.amount+" "+Locale.web_page_shop_offers_points_for+" €"+number_format(e.user_price,2,","," ")+"</h5>        <h5>1. "+Locale.web_page_shop_offers_get_code+"</h5>        "+a.dialog+'        <div class="solution-details"></div>        <div class="obtain-code"></div>        <h5>2. '+Locale.web_page_shop_offers_fill_code+"</h5>        "+Locale.web_page_shop_offers_fill_code_desc+'        <div class="row">            <div class="column-2">                <input type="text" class="rounded-input blue-active code" placeholder="Code...">            </div>            <div class="column-2">                <button class="rounded-button blue plain submit">'+Locale.web_page_shop_offers_submit+'</button>            </div>        </div>    </div>    <div class="success-step">        <h3 class="title">'+Locale.web_page_shop_offers_success+"</h3>        "+Locale.web_page_shop_offers_received+" <span></span> "+Locale.web_page_shop_offers_received2+'        <img src="/assets/images/web/pages/shop/credits-success.png" alt="'+Locale.web_page_shop_offers_success+'">        <button class="rounded-button lightgreen plain">'+Locale.web_page_shop_offers_close+'</button>    </div>    <div class="error-step">        <h3 class="title">'+Locale.web_page_shop_offers_failed+"</h3>        "+Locale.web_page_shop_offers_failed_desc+'        <img src="/assets/images/web/pages/shop/credits-error.png" alt="'+Locale.web_page_shop_offers_failed+'">        <button class="rounded-button red plain">'+Locale.web_page_shop_offers_back+"</button>    </div></div>"].join(""),n=$(i),s=null,o=null;"neosurf"===a.class&&(s=Locale.web_page_shop_offers_no_card+' <a href="http://www.neosurf.com/fr_FR/application/findcard" target="_blank">'+Locale.web_page_shop_offers_no_card2+"</a>."),null!==s?n.find(".solution-details").html(s):n.find(".solution-details").remove(),"sms-plus"===a.class?o=['<div class="sms-container '+("fr"===this.country?"fr":"")+'">    <span class="keyword">'+e.keyword+"</span> "+Locale.web_page_shop_offers_to+' <span class="shortcode">'+e.shortcode+'</span>    <div class="mention">'+e.mention+"</div></div>"].join(""):"audiotel"===a.class?o=['<div class="audiotel'+("be"!==this.country?"fr":"be")+'-container">    '+e.phone+'    <div class="mention">'+e.mention+"</div></div>"].join(""):isEmpty(e.link)||(o=['<button class="rounded-button blue">'+Locale.web_page_shop_offers_buy_code+"</button>"].join("")),null!==o&&n.find(".obtain-code").html(o),isEmpty(e.link)||n.find(".obtain-code button").click(function(){t.open_modal(e.link)}),n.find(".code").keypress(function(a){if(13!==a.keyCode)return null;isEmpty($(this).val())||t.submit_code(e,$(this).val())}),n.find(".submit").click(function(){var a=n.find(".code").val();isEmpty(a)||t.submit_code(e,a)}),n.find(".error-step button").click(function(){t.show_main_step()}),n.find(".success-step button").click(function(){$.magnificPopup.close()}),$.magnificPopup.open({closeOnBgClick:!1,items:{src:n,type:"inline"}})},this.open_modal=function(e){window.open(e,"Laden...","toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=1,width=600,height=550,left=420,top=150")},this.submitted=!1,this.submit_code=function(e,t){if(this.submitted)return null;this.disable_button();var a=this;$.ajax({type:"get",url:"https://api.dedipass.com/v1/pay/?key="+this.offer_id+"&rate=AUTORATE&code="+t+"&tokenize",dataType:"json"}).done(function(i){"success"===i.status?Web.ajax_manager.post("/shop/offers/validate",{offer_id:a.offer_id,code:t,price:e.user_price},function(e){"success"===e.status?a.show_success_step(e.amount):a.show_error_step()}):a.show_error_step()})},this.disable_button=function(){var e=$("body").find(".payment-popup").find(".main-step .submit");this.submitted=!0,e.text("Laden...").prop("disabled",!0)},this.enable_button=function(){var e=$("body").find(".payment-popup").find(".main-step .submit");this.submitted=!1,e.text("Valideren..").prop("disabled",!1)},this.show_main_step=function(){this.enable_button();var e=$("body").find(".payment-popup");e.find(".main-step").show(),e.find(".success-step").hide(),e.find(".error-step").hide()},this.show_success_step=function(e){this.enable_button();var t=$("body").find(".payment-popup");t.find(".main-step").hide(),t.find(".success-step span").text(e),t.find(".success-step").show(),t.find(".error-step").hide()},this.show_error_step=function(){this.enable_button();var e=$("body").find(".payment-popup");e.find(".main-step").hide(),e.find(".success-step").hide(),e.find(".error-step").show()}}function WebPageForumInterface(e){this.main_page=e,this.editbox=['<form action="community/forum/edit" method="post">\n<div class="replybox" style="padding-top:20px; border-top: 1px solid #acacac; border-spacing: 15px;">\n<textarea name="message" id="editor" class="rounded-textarea blue-active">{{data}}</textarea><br /><input type="submit" class="btn btn-success" value="'+Locale.web_page_forum_change+'"><input type="submit" class="btn btn-error" value="'+Locale.web_page_forum_cancel+'"><input type="hidden" name="action" value="edit"><input type="hidden" name="id" value="{{id}}"></div>'].join(""),this.init=function(){if(0!=User.is_logged){var e=this,t=this.main_page.get_page_container();t.find(".new-thread").click(function(){User.is_logged&&($("#editor").css("height","320px"),$("#editor").wysibb(),$("#forum-category, .new-thread, .pagination").hide(),$("#thread-content, .redo-reply").show())}),t.find(".redo-reply").click(function(){$("#thread-content, .redo-reply").hide(),$("#forum-category, .new-thread, .pagination").show()}),t.find(".replybtn").click(function(){console.log(1),void 0!==$(this).data("id")&&$("#editor").val("#quote:"+$(this).data("id")+"\n\n"),"closed"!=$(this).data("status")?($("#editor").css("height","220px"),$("#editor").wysibb(),$(".replybox").show(),$("html,body").animate({scrollTop:document.body.scrollHeight},"fast")):Web.notifications_manager.create("info",Locale.web_page_forum_topic_closed,Locale.web_page_forum_oops)}),t.find(".topicreply").click(function(){var a=$(this).data("id");Web.ajax_manager.post("/community/forum/edit",{id:a,action:"view"},function(i){if("success"==i.status){t.find(".replybox").remove();var n=$(e.editbox.replace(/{{data}}/g,atob(i.data)).replace(/{{id}}/g,a));t.find($(".forum-likes-container[data-id="+a+"]")).append(n),$("#editor").wysibb()}})}),t.find(".fa-heart").click(function(){$(this).hasClass("tools-active")&&e.like($(this).data("id"),$(this).data("guild"))}),t.find(".btn-func").click(function(){e.closeSticky($(this).data("id"),$(this).data("status"),$(this).data("guild"))}),$("#pagination").twbsPagination({totalPages:$("[name=totalpages]").val(),pageUrl:$("[name=page_url]").val(),startPage:parseFloat($("[name=currentpage]").val()),visiblePages:10,pageVariable:"page",href:!0,first:"Eerste",prev:"Vorige",last:"Laatste",next:"Volgende"})}},this.closeSticky=function(e,t,a){Web.ajax_manager.post("/guilds/post/topic/stickyclosethread",{id:e,action:t,guild_id:a})},this.like=function(e,t){Web.ajax_manager.post("/guilds/post/topic/like",{id:e,url:Web.pages_manager.current_page_url,guild_id:t},function(t){"success"==t.status&&$(".fa-heart[data-id="+e+"]").removeClass("tools-active")})}}function WebPagePasswordClaimInterface(e){this.main_page=e,this.init=function(){var e=this,t=this.main_page.get_page_container();if(t.find(".tabs-container span").click(function(){$(this).hasClass("selected")||e.update_avatar($(this).attr("data-avatar"))}),Configuration.recaptcha_public)var a=grecaptcha.render("password_claim-recaptcha",{sitekey:Configuration.recaptcha_public,size:"invisible",badge:"bottomright",callback:function(e){t.find(".password_claim-form").removeClass("default-prevent").submit().addClass("default-prevent"),grecaptcha.reset(a)}});t.find(".password_claim-form").submit(function(e){$(this).hasClass("default-prevent")&&(e.preventDefault(),grecaptcha.execute(a))})},this.check_captcha=function(){var e=this,t=this.main_page.get_page_container();t.find(".password_claim-recaptcha").length>0?t.find(".password_claim-form").submit():t.find(".password_claim_username-recaptcha").length>0?t.find(".password_claim-form").submit():setTimeout(function(){e.check_captcha()},100)}}